<div class="container">
  <p id="notice"><%= notice %></p>

  <div class='tour-details text-center'>
    <h5>
      <%= "Tournament #{@gladiator.title} starts at: #{@gladiator.start_date.strftime('%d-%b-%Y  | %H:%MÑ‡.')} (admin: #{@gladiator.admin.email})" %>
    </h5>

    <%- if admin_signed_in? %>
      <%= link_to 'Edit', edit_gladiator_path(@gladiator), class: 'btn btn-primary' %>
    <% end %>

    <p>
    <strong>Description:</strong>
    <%= @gladiator.info %>
    </p>

  </div>

  <div class='tour-enrollment text-center'>
    <hr>
    <div class="table">
      <h3>
        <caption><%="Players enrolled: #{@gladiator.players.count}" %></caption>
      </h3>
      <%# <%= form_for @gladiator do |f| %>
        <table class="table table-striped">
          <thead class="thead-dark">
            <tr>
              <th>Player:</th>
              <th>Enrolled?</th>
              <th>Points</th>
            </tr>
          </thead>
          <tbody>
            <%- if admin_signed_in? %>
              <%- @players.each do |player| %>
              <%# <%= f.collection_check_boxes :player_ids, @players, :id, :name, custom: :switch  do |b| %>
                <tr>
                  <td><%= player.name %></td>
                  <%= form_for(player, remote: true, url:  enroll_player_path, params: { tour: @gladiator }, html:{class: "class"}) do |f| %>
                    <%= f.label :player, class: "form-check-label" do %>
                      <%= hidden_field_tag "player[tour_id]", "#{@gladiator.id}" %>
                      <%= hidden_field_tag "player[player_id]", "#{player.id}" %>
                      <td><%= f.check_box :enrolled,  class: "form-check-input ajax-input", checked: player.enrolled_in?(@gladiator) %></td>
                      <% if player.enrolled_in?(@gladiator) %>
                        <td><%= f.text_field :points, class: "form-points-input ajax-input", value: player.points_for(@gladiator) %></td>
                      <% end %>
                    <% end %>
                  <% end %>
                </tr>
              <% end %>
            <% end %>
            <%- unless admin_signed_in? %>
              <% @gladiator.players.each do |player| %>
                <tr>
                  <td><%= player.name %></td>
                  <td>Enrolled</td>
                </tr>
              <% end %>
            <% end %>
          </tbody>
        </table>
      <%#   <%- if admin_signed_in? %>
      <%#     <div class="form-actions">
      <%#       <%= f.submit %>
      <%#     </div>
      <%#   <% end %>
      <%# <% end %>

    </div>
  </div>
</div>
